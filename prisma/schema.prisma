generator client {
  provider = "prisma-client-js"
}

// To update DB
// npx prisma generate
// npx prisma migrate dev  --name init --create-only
// npx prisma migrate deploy
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Merchant {
  id        Int       @id @default(autoincrement())
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  fullname  String    @db.VarChar(300)
  username  String    @unique @db.VarChar(20)
  password  String
  phone     String
  pageName  String
  lat       String
  long      String
  city      String
  area      String?
  debt      Float
  Order     Order[]
  Invoice   Invoice[]
}

model Order {
  id             Int       @id @default(autoincrement())
  customerName   String
  customerPhone  String
  customerPhone2 String
  customerLat    String
  customerLong   String
  city           String
  area           String
  nearestPoint   String?
  orderAmount    Float
  orderCount     Int
  orderStatus    Int
  notes          String?
  reason         String?
  merchant       Merchant  @relation(fields: [merchantId], references: [id])
  merchantId     Int
  delegate       Delegate? @relation(fields: [delegateId], references: [id])
  delegateId     Int?
}

model Delegate {
  id       Int     @id @default(autoincrement())
  fullname String  @db.VarChar(300)
  username String  @unique @db.VarChar(20)
  password String
  phone    String
  city     String
  area     String
  Order    Order[]
}

model Invoice {
  id         Int      @id @default(autoincrement())
  amount     Float
  date       DateTime @default(now())
  merchant   Merchant @relation(fields: [merchantId], references: [id])
  merchantId Int
}
